<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Accedi — Bar Scuola Borsa</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<style>
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

:root {
  --sans:    'DM Sans', sans-serif;
  --serif:   'DM Serif Display', Georgia, serif;
  --red:     #c8333f;
  --bg:      #090303;
  --surface: rgba(255,255,255,0.05);
  --border:  rgba(255,255,255,0.09);
  --border-h:rgba(255,255,255,0.16);
  --muted:   rgba(255,255,255,0.38);
}

body {
  font-family: var(--sans);
  background: var(--bg);
  color: white; min-height: 100vh; overflow: hidden;
  display: flex; align-items: center; justify-content: center;
  position: relative;
}

/* Ambient */
body::before {
  content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
  background:
    radial-gradient(ellipse at 25% 35%, rgba(180,40,50,0.13) 0%, transparent 55%),
    radial-gradient(ellipse at 75% 65%, rgba(140,20,30,0.1) 0%, transparent 50%);
}
/* Grain */
body::after {
  content:""; position:fixed; inset:0; pointer-events:none; z-index:0; opacity:0.4;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
  background-size: 180px;
}

/* ── Wrapper ── */
.wrapper {
  position: relative; z-index: 1;
  display: flex; flex-direction: column; align-items: center;
  padding: 24px; width: 100%;
  animation: rise 0.8s cubic-bezier(0.16,1,0.3,1) both;
}
@keyframes rise { from{opacity:0;transform:translateY(24px)} to{opacity:1;transform:translateY(0)} }

/* ── Logo ── */
.logo {
  display: flex; align-items: center; gap: 12px;
  text-decoration: none; margin-bottom: 36px;
}
.logo img { width:50px; height:50px; object-fit:contain; filter:drop-shadow(0 0 10px rgba(200,51,63,0.35)); }
.logo-divider { width:1px; height:24px; background:rgba(255,255,255,0.12); }
.logo-text { display:flex; flex-direction:column; line-height:1.2; }
.logo-text .s { font-size:9px; font-weight:400; letter-spacing:3.5px; text-transform:uppercase; color:var(--muted); }
.logo-text .m { font-size:13px; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:white; }

/* ── Card ── */
.card {
  width: 100%; max-width: 420px;
  background: rgba(10,4,4,0.92); backdrop-filter: blur(32px);
  border: 1px solid var(--border); border-radius: 24px;
  overflow: hidden;
  box-shadow: 0 40px 100px rgba(0,0,0,0.75), 0 0 0 1px rgba(200,51,63,0.05);
}
.card-stripe { height:2px; background:linear-gradient(90deg,transparent,var(--red),transparent); opacity:0.6; }
.card-body { padding:36px 34px 32px; }

/* ── Tabs ── */
.tabs {
  display: flex; gap: 3px;
  background: rgba(255,255,255,0.04); border:1px solid var(--border);
  border-radius: 12px; padding: 3px; margin-bottom: 28px;
}
.tab {
  flex: 1; padding: 10px; border-radius: 9px; border: none;
  font-family: var(--sans); font-size: 11px; font-weight: 600;
  letter-spacing: 1.5px; text-transform: uppercase;
  color: var(--muted); background: transparent; cursor: pointer;
  transition: all 0.22s;
}
.tab.active { background: var(--red); color: white; box-shadow: 0 3px 14px rgba(200,51,63,0.45); }

/* ── Panel ── */
.panel { display:none; }
.panel.active { display:block; }

/* Title */
.p-title {
  font-family: var(--serif); font-size: 26px; font-style: italic;
  color: white; margin-bottom: 4px;
}
.p-sub { font-size: 12.5px; color: var(--muted); margin-bottom: 24px; line-height: 1.7; }

/* Google btn */
.btn-google {
  display: flex; align-items: center; justify-content: center; gap: 10px;
  width: 100%; padding: 13px 18px; border-radius: 11px; text-decoration: none;
  background: var(--surface); border: 1px solid var(--border);
  color: rgba(255,255,255,0.75); font-family: var(--sans); font-size: 13px; font-weight: 500;
  transition: all 0.22s; margin-bottom: 6px;
}
.btn-google:hover { background:rgba(255,255,255,0.09); border-color:var(--border-h); color:white; transform:translateY(-1px); }

/* Divider */
.divider { display:flex; align-items:center; gap:12px; margin:18px 0; }
.divider .dl { flex:1; height:1px; background:var(--border); }
.divider span { font-size:10px; color:rgba(255,255,255,0.2); letter-spacing:1.5px; text-transform:uppercase; }

/* Fields */
.field { position:relative; margin-bottom:11px; }
.field i.icon { position:absolute; left:14px; top:50%; transform:translateY(-50%); font-size:13px; color:var(--muted); pointer-events:none; z-index:2; }
.field input {
  width:100%;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 11px; padding: 13px 14px 13px 40px;
  font-size: 13.5px; font-weight: 400; font-family: var(--sans);
  color: white; outline: none; transition: all 0.2s;
}
.field input::placeholder { color: rgba(255,255,255,0.27); }
.field input:focus { border-color: rgba(200,51,63,0.5); background: rgba(255,255,255,0.07); }
.field .eye-btn {
  position:absolute; right:13px; top:50%; transform:translateY(-50%);
  background:none; border:none; color:var(--muted); cursor:pointer; font-size:13px;
  transition:color 0.2s;
}
.field .eye-btn:hover { color:white; }
.field.has-eye input { padding-right:40px; }

/* Two column row */
.row-2 { display:grid; grid-template-columns:1fr 1fr; gap:10px; }

/* Forgot */
.forgot { text-align:right; margin: -4px 0 14px; }
.forgot a { font-size:11px; color:var(--muted); text-decoration:none; transition:color 0.2s; }
.forgot a:hover { color:#ff9090; }

/* Submit */
.btn-submit {
  display: flex; align-items: center; justify-content: center; gap: 9px;
  width: 100%; padding: 15px 20px; margin-top: 8px;
  background: var(--red); color: white; border: none; border-radius: 11px;
  font-family: var(--sans); font-size: 12px; font-weight: 600;
  letter-spacing: 2.5px; text-transform: uppercase; cursor: pointer;
  transition: all 0.28s; box-shadow: 0 4px 22px rgba(200,51,63,0.4);
}
.btn-submit:hover { transform:translateY(-2px); box-shadow:0 8px 30px rgba(200,51,63,0.55); }
.btn-submit:active { transform:translateY(0); }

/* Footer */
.card-footer {
  padding: 14px 34px 18px;
  border-top: 1px solid var(--border);
  text-align: center; font-size: 12px; color: var(--muted);
}
.card-footer a { color: rgba(200,51,63,0.8); text-decoration: none; font-weight:500; transition:color 0.2s; }
.card-footer a:hover { color:#ff8080; }

@media (max-width:480px) {
  .card-body { padding:28px 22px 24px; }
  .row-2 { grid-template-columns:1fr; }
}
</style>
</head>
<body>

<div class="wrapper">

  <!-- Logo -->
  <a class="logo" href="/">
    <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" onerror="this.style.visibility='hidden'">
    <div class="logo-divider"></div>
    <div class="logo-text">
      <span class="s">Sala &amp; Bar</span>
      <span class="m">Scuola Borsa</span>
    </div>
  </a>

  <!-- Card -->
  <div class="card">
    <div class="card-stripe"></div>
    <div class="card-body">

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab active" id="tab-login" onclick="switchTab('login')">Accedi</button>
        <button class="tab" id="tab-register" onclick="switchTab('register')">Registrati</button>
      </div>

      <!-- Login panel -->
      <div class="panel active" id="panel-login">
        <div class="p-title">Bentornato</div>
        <p class="p-sub">Accedi per ordinare con i tuoi dati salvati.</p>

        <!-- Google -->
        <a href="{{ url_for('auth.login') }}" class="btn-google">
          <svg width="17" height="17" viewBox="0 0 24 24">
            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
          </svg>
          Continua con Google
        </a>

        <div class="divider"><div class="dl"></div><span>oppure</span><div class="dl"></div></div>

        <form action="/login" method="POST">
          <div class="field">
            <i class="icon fas fa-user"></i>
            <input type="text" name="username" placeholder="Username" required/>
          </div>
          <div class="field has-eye">
            <i class="icon fas fa-lock"></i>
            <input type="password" name="password" id="pw1" placeholder="Password" required/>
            <button type="button" class="eye-btn" onclick="toggleEye('pw1',this)"><i class="fas fa-eye"></i></button>
          </div>
          <div class="forgot"><a href="#">Password dimenticata?</a></div>
          <button class="btn-submit" type="submit"><i class="fas fa-sign-in-alt"></i> Accedi</button>
        </form>
      </div>

      <!-- Register panel -->
      <div class="panel" id="panel-register">
        <div class="p-title">Crea account</div>
        <p class="p-sub">Registrati per un'esperienza personalizzata.</p>

        <form action="/register" method="POST">
          <div class="row-2">
            <div class="field">
              <i class="icon fas fa-user"></i>
              <input type="text" name="nome" placeholder="Nome" required/>
            </div>
            <div class="field">
              <i class="icon fas fa-user"></i>
              <input type="text" name="cognome" placeholder="Cognome" required/>
            </div>
          </div>
          <div class="field">
            <i class="icon fas fa-envelope"></i>
            <input type="email" name="email" placeholder="Email" required/>
          </div>
          <div class="field has-eye">
            <i class="icon fas fa-lock"></i>
            <input type="password" name="password" id="pw2" placeholder="Password" required/>
            <button type="button" class="eye-btn" onclick="toggleEye('pw2',this)"><i class="fas fa-eye"></i></button>
          </div>
          <div class="field has-eye">
            <i class="icon fas fa-lock"></i>
            <input type="password" name="password2" id="pw3" placeholder="Conferma password" required/>
            <button type="button" class="eye-btn" onclick="toggleEye('pw3',this)"><i class="fas fa-eye"></i></button>
          </div>
          <button class="btn-submit" type="submit"><i class="fas fa-user-plus"></i> Crea Account</button>
        </form>
      </div>

    </div>
    <div class="card-footer">
      <a href="/">← Torna al sito</a>
    </div>
  </div>

</div>

<script>
function switchTab(tab) {
  document.getElementById('panel-login').classList.toggle('active', tab==='login');
  document.getElementById('panel-register').classList.toggle('active', tab==='register');
  document.getElementById('tab-login').classList.toggle('active', tab==='login');
  document.getElementById('tab-register').classList.toggle('active', tab==='register');
}

function toggleEye(id, btn) {
  const el = document.getElementById(id);
  const show = el.type === 'password';
  el.type = show ? 'text' : 'password';
  btn.innerHTML = show ? '<i class="fas fa-eye-slash"></i>' : '<i class="fas fa-eye"></i>';
}
</script>
</body>
</html>